(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(2),c=t(15),o=t.n(c),u=t(6),i=t(3),l=function(e){var n=e.text,t=e.value,a=e.handler;return Object(r.jsxs)("div",{children:[n,": ",Object(r.jsx)("input",{value:t,onChange:a})]})},d=function(e){var n=e.submitHandler,t=e.nameVal,a=e.nameHandler,c=e.phoneVal,o=e.phoneHandler;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsx)(l,{text:"Name",value:t,handler:a}),Object(r.jsx)(l,{text:"Phone",value:c,handler:o}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},s=function(e){var n=e.personObject,t=e.deleteHandler;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{type:"button",onClick:t,children:"Delete"})]})},f=function(e){var n=e.personsList,t=e.deleteHandler;return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(s,{personObject:e,deleteHandler:function(){return t(e)}},e.name)}))})},b=function(e){var n=e.message;if(null===n)return null;var t={color:["Added","Deleted","Updated"].includes(n.split(":")[0])?"green":"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(r.jsx)("div",{className:"error",style:t,children:n})},j=t(4),h=t.n(j),m="/api/persons",v=function(e){return e.data},p={getAll:function(){return h.a.get(m).then(v)},addPerson:function(e){return h.a.post(m,e).then(v)},updatePerson:function(e){var n=e.id;return h.a.put("".concat(m,"/").concat(n),e).then(v)},deletePerson:function(e){return h.a.delete("".concat(m,"/").concat(e))}},O=function(e){var n=e.filter,t=e.filterHandler;return Object(r.jsxs)("div",{children:["Search: ",Object(r.jsx)("input",{value:n,onChange:t})]})},x=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),s=l[0],j=l[1],h=Object(a.useState)(""),m=Object(i.a)(h,2),v=m[0],x=m[1],g=Object(a.useState)(""),H=Object(i.a)(g,2),y=H[0],P=H[1],S=Object(a.useState)(null),k=Object(i.a)(S,2),w=k[0],T=k[1];Object(a.useEffect)((function(){p.getAll().then((function(e){return c(e)}))}),[]);var A=t.filter((function(e){return e.name.toUpperCase().includes(y.toUpperCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(b,{message:w}),Object(r.jsx)(O,{filter:y,filterHandler:function(e){return P(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new person"}),Object(r.jsx)(d,{submitHandler:function(e){if(e.preventDefault(),""!==s&&""!==v){var n=t.filter((function(e){return e.name===s}));if(0===n.length)p.addPerson({name:s,number:v}).then((function(e){c(t.concat(e)),j(""),x("");var n="Added: ".concat(e.name,".");T(n),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){var n=e.response.data.error;T(n),setTimeout((function(){return T(null)}),5e3)}));else if(window.confirm("".concat(s," already in phonebook. Replace old number with given number?"))){var r=n[0];return r=Object(u.a)(Object(u.a)({},r),{},{number:v}),void p.updatePerson(r).then((function(e){var n=t.map((function(e){return e.name===r.name?r:e}));c(n),j(""),x("");var a="Updated: ".concat(s,".");T(a),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){c(t.filter((function(e){return e.name!==s}))),j(""),x("");var n="The information for ".concat(s," has already been deleted.");T(n),setTimeout((function(){return T(null)}),5e3)}))}}else alert("Please enter a value for both fields.")},nameVal:s,nameHandler:function(e){return j(e.target.value)},phoneVal:v,phoneHandler:function(e){return x(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(f,{personsList:A,deleteHandler:function(e){var n=e.name,r=e.id;if(window.confirm("Delete ".concat(n,"?"))){p.deletePerson(r).then((function(){var e="Deleted: ".concat(n,".");T(e),setTimeout((function(){return T(null)}),5e3)})).catch((function(){var e="The information for ".concat(n," has already been deleted.");T(e),setTimeout((function(){return T(null)}),5e3),c(t.filter((function(e){return e.name!==n})))}));var a=t.filter((function(e){return e.id!==r}));c(a)}}})]})};t(39);o.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9b1c28e2.chunk.js.map