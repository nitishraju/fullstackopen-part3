(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(2),c=t(14),o=t.n(c),u=t(3),i=function(e){var n=e.text,t=e.value,a=e.handler;return Object(r.jsxs)("div",{children:[n,": ",Object(r.jsx)("input",{value:t,onChange:a})]})},l=function(e){var n=e.submitHandler,t=e.nameVal,a=e.nameHandler,c=e.phoneVal,o=e.phoneHandler;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsx)(i,{text:"Name",value:t,handler:a}),Object(r.jsx)(i,{text:"Phone",value:c,handler:o}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var n=e.personObject,t=e.deleteHandler;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{type:"button",onClick:t,children:"Delete"})]})},s=function(e){var n=e.personsList,t=e.deleteHandler;return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(d,{personObject:e,deleteHandler:function(){return t(e)}},e.name)}))})},f=function(e){var n=e.message;if(null===n)return null;var t={color:["Added","Deleted","Updated"].includes(n.split(":")[0])?"green":"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(r.jsx)("div",{className:"error",style:t,children:n})},b=t(4),j=t.n(b),h="/api/persons",m=function(e){return e.data},v={getAll:function(){return j.a.get(h).then(m)},addPerson:function(e){return j.a.post(h,e).then(m)},updatePerson:function(e){var n=e.id;return j.a.put("".concat(h,"/").concat(n),e).then(m)},deletePerson:function(e){return j.a.delete("".concat(h,"/").concat(e))}},p=function(e){var n=e.filter,t=e.filterHandler;return Object(r.jsxs)("div",{children:["Search: ",Object(r.jsx)("input",{value:n,onChange:t})]})},O=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),d=i[0],b=i[1],j=Object(a.useState)(""),h=Object(u.a)(j,2),m=h[0],O=h[1],x=Object(a.useState)(""),g=Object(u.a)(x,2),H=g[0],y=g[1],P=Object(a.useState)(null),S=Object(u.a)(P,2),k=S[0],w=S[1];Object(a.useEffect)((function(){v.getAll().then((function(e){return c(e)}))}),[]);var T=t.filter((function(e){return e.name.toUpperCase().includes(H.toUpperCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:k}),Object(r.jsx)(p,{filter:H,filterHandler:function(e){return y(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new person"}),Object(r.jsx)(l,{submitHandler:function(e){if(e.preventDefault(),""!==d&&""!==m){var n=function(e){var n=null;return n=void 0!==e?e:t.length>0?t[t.length-1].id+1:1,{name:d,number:m,id:n}};if(0===t.filter((function(e){return e.name===d})).length)v.addPerson(n()).then((function(e){c(t.concat(e)),b(""),O("");var n="Added: ".concat(e.name,".");w(n),setTimeout((function(){return w(null)}),5e3)}));else if(window.confirm("".concat(d," already in phonebook. Replace old number with given number?"))){var r=n(t.filter((function(e){return e.name===d}))[0].id);return void v.updatePerson(r).then((function(){var e=t.map((function(e){return e.name===r.name?r:e}));c(e);var n="Updated: ".concat(d,".");w(n),setTimeout((function(){return w(null)}),5e3)})).catch((function(){var e="The information for ".concat(d," has already been deleted.");w(e),setTimeout((function(){return w(null)}),5e3),c(t.filter((function(e){return e.name!==d})))}))}}else alert("Please enter a value for both fields.")},nameVal:d,nameHandler:function(e){return b(e.target.value)},phoneVal:m,phoneHandler:function(e){return O(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(s,{personsList:T,deleteHandler:function(e){var n=e.name,r=e.id;if(window.confirm("Delete ".concat(n,"?"))){v.deletePerson(r).then((function(){var e="Deleted: ".concat(n,".");w(e),setTimeout((function(){return w(null)}),5e3)})).catch((function(){var e="The information for ".concat(n," has already been deleted.");w(e),setTimeout((function(){return w(null)}),5e3),c(t.filter((function(e){return e.name!==n})))}));var a=t.filter((function(e){return e.id!==r}));c(a)}}})]})};t(38);o.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a3455c9f.chunk.js.map